{% extends "base.html" %}
{% load static %}



{% block content %}
<div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="{% static "harry.jpg" %}" class="d-block w-100" alt="img01">
    </div>
    <div class="carousel-item">
      <img src="{% static "rings.jpg" %}" class="d-block w-100" alt="img02">
    </div>
    <div class="carousel-item">
      <img src="{% static "parasite.jpg" %}" class="d-block w-100" alt="img03">
    </div>
    <div class="carousel-item">
      <img src="{% static "job.jpg" %}" class="d-block w-100" alt="img04">
    </div>
    <div class="carousel-item">
      <img src="{% static "city.jpg" %}" class="d-block w-100" alt="img06">
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
  </button>
</div>

<br>
<br>

<h1>INDEX PAGE</h1>
<br>



<div class="row row-cols-1 row-cols-md-3 g-4">
  {% for movie in movies %}
  <div class="col">
    <div class="card h-100">
        <div class="card-body">
          <h5 class="card-title"><a href="{% url "movies:detail" movie.pk %}">{{movie.title}}</a></h5>
          <p class="card-text text-end">
            <small class="text-body-secondary">{{movie.created_at}}</small>
          </p>
        </div>
        <div class="card-footer">  
          <form action="{% url 'movies:likes' movie.pk %}" method="POST">
            {% csrf_token %}
              좋아요 {{movie.like_users.all | length}} 
            {% if request.user in movie.like_users.all %}
             <button class="btn btn-secondary" style="float: right;" type="submit">좋아요 취소</button>
            {% else %}
             <button class="btn btn-secondary" style="float: right;" type="submit">좋아요</button>
            {% endif %}
          </form>
        </div>
      </div>
    </div> 
  {% endfor %}
  </div> 
<br>

{% endblock content %}



